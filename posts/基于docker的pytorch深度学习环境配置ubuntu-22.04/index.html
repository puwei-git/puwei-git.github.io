<!doctype html><html lang=zh-CN><head><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content="基于Docker的PyTorch深度学习环境配置（Ubuntu 22.04） - https://puwei-git.github.io/posts/%E5%9F%BA%E4%BA%8Edocker%E7%9A%84pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AEubuntu-22.04/"><meta name=author content="Puwei - https://puwei-git.github.io/"><meta name=msvalidate.01 content="B46311949B856F2A7015F366FB3CE878"><title>基于Docker的PyTorch深度学习环境配置（Ubuntu 22.04）</title>
<base target=_blank><link rel=icon type=image/png href=/favicon.ico><link rel=stylesheet href=https://puwei-git.github.io/style.min.d19a8e0c2a1af6e0012c8ff2146e27e72ce82a90dc47cbc9b8ddc4dfe6a353da.css><script>const DARK=!1</script><script type=text/javascript src=/main.js defer></script></head><body class="active-animate cool"><div class=container-floating-box><div class="box box1"></div><div class="box box11"></div><div class="box box12"></div><div class="box box2"></div><div class="box box3"></div><div class="box box4"></div><div class="box box5"></div><div class="box box6"></div><div class="box box7"></div><div class="box box8"></div><div class="box box9"></div></div><div class=cool-before style="background:url(/imgs/bg/fallleaf.jpg)0 0/100% no-repeat fixed"></div><div id=header><div class=container-header><div class=right><h1 class=title>基于Docker的PyTorch深度学习环境配置（Ubuntu 22.04）</h1><div id=toc>📜</div></div></div></div><div id=content><div class="container-main container-page"><div class=rel><div class=curtag-desc><a href=https://puwei-git.github.io/tags/pytorch/><img src=/imgs/icons/tag.svg width=16> 相关文章：Pytorch <sup>1</sup></a></div><div class=curtag-post><div class="curtag-post-item curtag-post-item--active"><a href=https://puwei-git.github.io/posts/%E5%9F%BA%E4%BA%8Edocker%E7%9A%84pytorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AEubuntu-22.04/>基于Docker的PyTorch深度学习环境配置（Ubuntu 22.04）</a></div></div></div><div class=desc><span><svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667l-324.522666 324.48c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334L685.098667 499.2 524.885333 338.986667zM585.258667 278.656l160.170666 160.213333 102.144-102.144a19.712 19.712.0 000-27.861333l-132.48-132.437333a19.456 19.456.0 00-27.605333.0L585.258667 278.613333zM701.312 85.333333c27.946667.0 54.741333 11.136 74.282667 30.848L907.904 248.490667a105.045333 105.045333.0 010 148.565333L424.874667 879.957333C395.050667 914.304 352.768 935.424 304.426667 938.752H85.333333v-42.666667l.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666a104.789333 104.789333.0 0174.24-30.933334z" p-id="7410" fill="#adb5bd"/></svg>
2024-05-21&nbsp;&nbsp;&nbsp;
<svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859.0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775.0-360.398 149.372-360.398 356.147S305.225 870.23 512 870.23c206.775.0 357.467-151.455 357.467-358.23.0-23.859 23.634-50.706 53.413-50.706 29.78.0 49.92 26.847 49.92 50.706.0 254.493-206.307 460.8-460.8 460.8s-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4.0 226.684 33.296 312.264 117.369.358.351.358-24.052.0-73.209z" p-id="23839" fill="#adb5bd"/></svg>
2025-01-19&nbsp;&nbsp;&nbsp;
</span><span><svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028c-70.774903.0-128.089859 57.325793-128.089859 128.03206v446.793671c0 70.7171050000001 57.314956 128.154884 128.089859 128.154884h133.353183a63.940169 63.940169.0 0155.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169.0 0155.212517-31.551041h133.54103c70.576219.0 127.732228-57.289669 127.732227-127.800865V192.391272c0-70.536482-57.181295-127.728615-127.786414-127.728615zM895.884854 639.842407A63.85347 63.85347.0 01832.092795 703.703103h-133.54103a127.753903 127.753903.0 00-110.349172 63.09847l-76.222461 129.856342a.274545.274545.0 010-.050574h-.032512s-.021675.061411-.032512.061412l-76.1466-129.85273a127.804477 127.804477.0 00-110.385297-63.11292H192.030028A64.207489 64.207489.0 01127.880338 639.488388V192.694717a64.102729 64.102729.0 0164.14969-64.091891h640.00858a63.799284 63.799284.0 0163.846246 63.788446v447.451135z" fill="#adb5bd" p-id="33867"/><path d="M608.154093 288.092004a31.970084 31.970084.0 00-31.970084 31.970085v160.078006L441.53396 300.861976a31.970084 31.970084.0 00-57.531702 19.200113v255.760676a31.970084 31.970084.0 0063.940169.0V415.863969l134.650048 179.274507a31.970084 31.970084.0 0057.531703-19.200113V320.062089a31.970084 31.970084.0 00-31.970085-31.970085z" fill="#adb5bd" p-id="33868"/></svg>
2564 字</span>&nbsp;
<span><svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zm0 810.666666C307.2 885.333333 138.666667 716.8 138.666667 512S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"/><path d="M695.466667 567.466667 544 497.066667V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666L669.866667 627.2c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8.0 23.466667-6.4 29.866666-19.2 6.4-14.933333.0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"/></svg>
6 分钟</span><div class=container-ctgtag><div class=taxonomy><div class=tag><a href=/tags/pytorch>Pytorch</a></div></div></div></div><div class=toc><div class=container-page-operation><div class=page-operation><div><a href=/><img src=/imgs/icons/home-2.svg alt></a></div><div><a href=/nav><img src=/imgs/icons/iov-navigate-1.svg alt></a></div><div><a href=/wiki><img src=/imgs/icons/wiki.svg alt></a></div><div><a href=/tags><img src=/imgs/icons/treetags.svg alt></a></div><div id=light-dark><a><img src=/imgs/icons/moon2.svg alt></a></div><div><a href=#><img src=/imgs/icons/up2.svg alt></a></div></div></div><nav id=TableOfContents><ul><li><a href=#说明>说明</a></li><li><a href=#docker安装及常用命令>docker安装及常用命令</a><ul><li><a href=#docker安装>docker安装</a></li><li><a href=#docker常用命令>docker常用命令</a></li></ul></li><li><a href=#显卡驱动及nvidia-docker安装>显卡驱动及Nvidia docker安装</a><ul><li><a href=#显卡驱动安装>显卡驱动安装</a></li><li><a href=#nvidia-docker安装>Nvidia docker安装</a></li><li><a href=#获取docker镜像>获取docker镜像</a></li></ul></li><li><a href=#配置pycharm调用本机docker环境>配置PyCharm调用本机docker环境</a><ul><li><a href=#本机docker容器配置>本机docker容器配置</a></li><li><a href=#pycharm配置>PyCharm配置</a></li><li><a href=#后记>后记</a></li></ul></li><li><a href=#参考文章>参考文章</a></li></ul></nav></div><div class=content><h2 id=说明>说明</h2><ul><li>为解决不同项目的深度学习环境不同以及配置配置麻烦的问题，采用docker容器，通过下载运行<a href=https://catalog.ngc.nvidia.com/orgs/nvidia/containers/pytorch/tags>官网</a>现成的容器进行配置。</li><li>为解决docker内无法直观显示图片等问题，采用PyCharm调用docker中的环境。</li><li>本配置使用本机的docker,而不是服务器中的docker,后续有需要或将此文章更新为两种配置。</li><li>配置此文环境且写此文档时，本机电脑配置为AMD Ryzen 9 3900X + NVIDIA GeForce GTX 1660 SUPER。</li><li>本机系统为：Ubuntu 22.04</li></ul><p>PS：由于前后花费较多时间，并且文档整理期间也有事情耽误几天，或有遗漏错误，还望指正！</p><h2 id=docker安装及常用命令>docker安装及常用命令</h2><h3 id=docker安装>docker安装</h3><p>本部分有参考<a href=https://soulteary.com/2022/06/21/building-a-cost-effective-linux-learning-environment-on-a-laptop-the-basics.html#%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84-docker-%E5%AE%89%E8%A3%85>苏洋博客</a>中更简单的docker安装内容。如果有需要，读者可以参考相应内容。</p><h4 id=清理老版本的软件>清理老版本的软件</h4><pre><code>sudo apt remove -y docker docker-engine docker.io containerd runc
</code></pre><h4 id=安装所需工具依赖>安装所需工具依赖</h4><pre><code>sudo apt install -y ca-certificates curl gnupg lsb-release
</code></pre><h4 id=下载软件包签名使用的gpg密钥并配置系统信任该密钥>下载软件包签名使用的GPG密钥，并配置系统信任该密钥</h4><pre><code>sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
</code></pre><p>若无法访问官方地址，可以将密钥下载地址替换为下面的地址。</p><pre><code># 清华源
https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu/gpg
# 阿里云
https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg
</code></pre><h4 id=创建一个适合于当前-cpu-架构和系统版本的软件源>创建一个适合于当前 CPU 架构和系统版本的软件源。</h4><pre><code>echo \
  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre><p>同样的，如果你希望能够更快的下载到软件，可以配置软件源来替换官方地址。</p><pre><code># 清华源
echo \
  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu/ \
  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
# 阿里云
echo \
  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ \
  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre><h4 id=安装docker的社区版>安装docker的社区版</h4><pre><code>sudo apt update &amp;&amp; sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre><h4 id=将当前用户加入docker用户组>将当前用户加入docker用户组</h4><pre><code>sudo gpasswd -a ${USER} docker
</code></pre><h4 id=查看-docker-的用户组>查看 docker 的用户组</h4><pre><code>sudo cat /etc/group | grep docker
</code></pre><h4 id=为docker配置镜像mirror>为docker配置镜像Mirror</h4><p>有的时候，我们拉取 docker 官方镜像会十分的慢，甚至会卡顿中断，这个时候，可以考虑为 docker 配置一些容器镜像。</p><p>执行下面的命令，将会创建一个位于/etc/docker/daemon.conf 的文件，并包含一些通用的容器镜像。</p><pre><code>echo '{&quot;registry-mirrors&quot;: [ 
    &quot;https://registry.docker-cn.com&quot;,
    &quot;http://hub-mirror.c.163.com&quot;,
    &quot;https://docker.mirrors.ustc.edu.cn/&quot;,
    &quot;https://zrb2xl6u.mirror.aliyuncs.com&quot;
  ]}' | jq | sudo tee /etc/docker/daemon.json
</code></pre><p>执行命令：</p><pre><code>cat /etc/docker/daemon.conf
</code></pre><p>能够看到配置中添加了上面的镜像地址，并且内容是被格式化过的。</p><p>执行下面的命令，重启服务：</p><pre><code>sudo systemctl restart docker.service
</code></pre><p>然后执行下面的命令确认配置是否生效即可</p><pre><code>docker info
</code></pre><p>启动docker</p><pre><code>service docker start
</code></pre><h3 id=docker常用命令>docker常用命令</h3><ul><li>查看正在运行的容器<br>docker ps</li><li>查看所有容器<br>docker ps -a</li><li>保存当前容器为新的镜像（镜像命名不能有大写字母）
docker commit 8c9e37f0a008 pytorch_env:v0.1</li><li>启动容器（后台模式）
docker run -d ubuntu:14.04 /bin/bash -c &ldquo;while true; do echo hello world; sleep 1; done&rdquo;</li><li>停止容器
docker stop 容器ID</li><li>查看命令使用方法
docker command &ndash;help</li><li>启动已停止运行的容器
docker restart 容器ID</li><li>为容器启动第二个终端
docker exec -it 容器ID /bin/bash</li><li>后台运行
docker run -itd &ndash;name</li><li>退出容器终端且不会导致容器停止
docker exec</li><li>进入后台的容器
docker attach 容器ID</li><li>导出容器
docker export 容器ID > ubuntu.tar</li><li>将容器快照文件导入为镜像
docker/ubuntu.tar | docker import - pytorch_env:v1.0</li><li>删除容器
docker rm -f 容器ID</li><li>列出镜像列表
docker images</li><li>删除镜像
docker rmi 镜像名</li></ul><h2 id=显卡驱动及nvidia-docker安装>显卡驱动及Nvidia docker安装</h2><h3 id=显卡驱动安装>显卡驱动安装</h3><h4 id=获取最新版本的稳定版本的驱动>获取最新版本的稳定版本的驱动</h4><pre><code>nvidia-detector
</code></pre><p><img src=https://i-blog.csdnimg.cn/blog_migrate/7410b14cca2d5309882fab51bb0b5eae.png alt=在这里插入图片描述></p><h4 id=根据获取的提示安装驱动>根据获取的提示安装驱动</h4><pre><code>sudo apt-get install -y nvidia-driver-545 nvidia-dkms-545
</code></pre><h4 id=测试nvidia-smi报错>测试nvidia-smi报错</h4><p>NVIDIA-SMI has failed because it couldn&rsquo;t communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.
参考<a href=https://blog.csdn.net/sazass/article/details/116074288>解决方法</a>：通过安装对应的驱动模块。
查看对应驱动模块</p><pre><code>cd /usr/src
ls
</code></pre><p><img src=https://i-blog.csdnimg.cn/blog_migrate/d1123a7c73c19b2f3599a8f76eb55329.png alt=在这里插入图片描述>
然后安装对应的DKMS</p><pre><code>sudo apt-get install dkms
</code></pre><p>根据个人版本号重新安装对应nvidia的驱动模块</p><pre><code>sudo dkms install -m nvidia -v 545.29.06
</code></pre><p>输入nvidia-smi测试
<img src=https://i-blog.csdnimg.cn/blog_migrate/5b574e69445b41a880a9afe318ac9bd6.png alt=在这里插入图片描述></p><h3 id=nvidia-docker安装>Nvidia docker安装</h3><p>根据<a href=https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html>官网</a>的提示进行安装，我这里采用的是apt安装方式。
安装Lib Nvidia Container工具的软件源：</p><pre><code>curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \
&amp;&amp; curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \
sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
</code></pre><p>更新系统软件列表并安装nvidia-container-toolkit：</p><pre><code>sudo apt-get update
sudo apt-get install -y nvidia-container-toolkit
</code></pre><p>完成安装后配置docker：</p><pre><code>sudo nvidia-ctk runtime configure --runtime=docker
</code></pre><p><img src=https://i-blog.csdnimg.cn/blog_migrate/9bc36c32ec0c39cb87843acb9b1ea5a2.png alt=在这里插入图片描述>
完成配置后重启docker服务，使配置生效：</p><pre><code>sudo systemctl restart docker
</code></pre><p>重启服务后，查看docker运行时列表可以看到生效信息：</p><pre><code>docker info | grep Runtimes
</code></pre><p><img src=https://i-blog.csdnimg.cn/blog_migrate/fadedd4e98cc50258b87398b8fd4b402.png alt=在这里插入图片描述></p><h3 id=获取docker镜像>获取docker镜像</h3><p>自己构建镜像会比较折腾，这里考虑直接获取官方镜像。这里给出几个网站：<a href=https://catalog.ngc.nvidia.com/orgs/nvidia/containers/pytorch/tags>nvidia pytorch镜像</a>，<a href="https://catalog.ngc.nvidia.com/containers?filters=&amp;orderBy=weightPopularDESC&amp;query=&amp;page=&amp;pageSize=">nvidia镜像官网</a>，<a href=https://hub.docker.com/>docker hub镜像</a>。
这里由于下载的docker镜像的cuda版本应不高于主机的cuda版本，这里并没有下载当时最新的docker镜像，而是下载了pytorch:23.02-py3。</p><p>运行下面的代码即下载并运行此docker容器了</p><pre tabindex=0><code>docker run --gpus all -it --rm nvcr.io/nvidia/pytorch:23.02-py3 nvidia-smi
</code></pre><p>但是输出的日志可能会提醒我们并行计算需要的缓存不足：</p><pre tabindex=0><code>NOTE: The SHMEM allocation limit is set to the default of 64MB.  This may be
   insufficient for PyTorch.  NVIDIA recommends the use of the following flags:
   docker run --gpus all --ipc=host --ulimit memlock=-1 --ulimit stack=67108864 ...
</code></pre><p>我们可以根据说明继续调整命令，并添加文件挂载等命令，可以直接启动</p><pre tabindex=0><code>docker run --gpus all --ipc=host --ulimit memlock=-1 --ulimit stack=67108864 -it -v \
/home/puwei/Documents/Docker_share:/root/Documents:rw --rm nvcr.io/nvidia/pytorch:23.02-py3 /bin/bash
</code></pre><p>退出docker</p><pre><code>exit
</code></pre><h2 id=配置pycharm调用本机docker环境>配置PyCharm调用本机docker环境</h2><h3 id=本机docker容器配置>本机docker容器配置</h3><h4 id=启动镜像>启动镜像</h4><p>由于需要使用ssh访问容器，就需要将容器内的端口映射到主机的端口，这里采用端口映射的镜像启动方式：</p><pre tabindex=0><code>docker run --gpus all --ipc=host --ulimit memlock=-1 --ulimit stack=67108864 -it -v \
/home/puwei/Documents/Docker_share:/root/Documents:rw --name PyTorch_v0.1 -p 8022:22 \
--rm nvcr.io/nvidia/pytorch:23.02-py3 /bin/bash
</code></pre><p>其中</p><pre><code>/home/puwei/Documents/Docker_share:/root/Documents:rw，表示并将宿主机的 /home/puwei/Documents/Docker_share 目录挂载到容器内的 /root/Documents 目录；
PyTorch_v0.1，表示命名一个这样的容器名；
8022:22，表示端口映射；
</code></pre><h4 id=容器内安装sudo>容器内安装sudo</h4><pre><code>apt-get update
apt-get install sudo
</code></pre><h4 id=容器内安装并启动ssh查看ssh服务状态>容器内安装并启动ssh，查看ssh服务状态</h4><pre><code>sudo apt-get install openssh-server	
sudo /etc/init.d/ssh start
sudo service ssh status
</code></pre><h4 id=容器内设置root密码和配置文件>容器内设置root密码和配置文件</h4><p>设置密码：</p><pre><code>passwd root
</code></pre><p>配置文件：</p><pre><code>vim /etc/ssh/sshd_config
</code></pre><p>在文档末尾添加以下内容（中文解释可以全部去掉）：</p><pre><code>#启用 RSA 认证
RSAAuthentication yes 
#启用公钥私钥配对认证方式
PubkeyAuthentication yes 
#公钥文件路径（和上面生成的文件同）
AuthorizedKeysFile .ssh/authorized_keys 
#root能使用ssh登录
PermitRootLogin yes 
</code></pre><p><img src=https://i-blog.csdnimg.cn/blog_migrate/00df6dab3070fb66ace865c6d43990d4.png alt=在这里插入图片描述></p><p>重启ssh：</p><pre><code>service ssh restart
</code></pre><h3 id=pycharm配置>PyCharm配置</h3><ul><li>需要注意的是，PyCharm必须是专业版。</li></ul><p>首先随便打开一个工程，然后在File->Settings->Project->Python Interpreter->Add->On SSH
选择On SSH
<img src=https://i-blog.csdnimg.cn/blog_migrate/8ef6b173aac0aa5d3f9f98fda6ea3503.png alt=在这里插入图片描述>
使用127.0.0.1（默认）连接本地docker容器，端口号为启动时设置的8022
<img src=https://i-blog.csdnimg.cn/blog_migrate/4a60db300ba73ceb7f70b5d1ef043f53.png alt=在这里插入图片描述>
输入密码，密码为刚刚设置的密码
<img src=https://i-blog.csdnimg.cn/blog_migrate/5d775d0216ee7a6be61d7f10e4f1623b.png alt=在这里插入图片描述></p><p><img src=https://i-blog.csdnimg.cn/blog_migrate/9ae745c911dd5b5aa9c776a4ec7b43f2.png alt=在这里插入图片描述>
这里要注意，在环境选取处选择Existing，并且将Interpreter设置为/usr/bin/python
<img src=https://i-blog.csdnimg.cn/blog_migrate/6ea9ceea24e269773b779b0a0708b474.png alt=在这里插入图片描述>
正确添加环境后会加载环境中的配置，如下（环境加载会花费一些时间）
<img src=https://i-blog.csdnimg.cn/blog_migrate/b60eaa4c6f42d87a96cee223f5bd8ebb.png alt=在这里插入图片描述>
到此就连接完成了，测试一下
<img src=https://i-blog.csdnimg.cn/blog_migrate/654b33763f85f173b80d04ecb1cad165.png alt=在这里插入图片描述>
容器进行配置后，注意保存容器为新的镜像。</p><h3 id=后记>后记</h3><p>后面重新打开容器时，可能会显示无法连接，这时重启一下ssh即可。</p><pre><code>service ssh restart
sudo service ssh status
</code></pre><p><img src=https://i-blog.csdnimg.cn/blog_migrate/e1c8a61d6aeab4a5f907250928e39970.png alt=在这里插入图片描述></p><h2 id=参考文章>参考文章</h2><p>docker部分：<a href=https://soulteary.com/2022/06/21/building-a-cost-effective-linux-learning-environment-on-a-laptop-the-basics.html#%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84-docker-%E5%AE%89%E8%A3%85>苏洋博客</a>等。
nvidia docker部分：<a href=https://blog.csdn.net/sazass/article/details/116074288>nvidia-smi报错</a>，<a href="https://zhuanlan.zhihu.com/p/616208372?utm_id=0">nvidia docker整体安装</a>等。
配置调用部分：<a href="https://gitcode.csdn.net/65ec52c91a836825ed79871d.html?dp_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MTEzNDY5MSwiZXhwIjoxNzE2MjgxODA5LCJpYXQiOjE3MTU2NzcwMDksInVzZXJuYW1lIjoicXFfMzk1OTQyNDYifQ.IVx7zmlDAxkaNtFJUSdA7ZS4O208JN0lrPsjT8UHNrc">pycharm使用docker容器开发</a>，<a href=https://blog.csdn.net/weixin_44533869/article/details/119891809>pycharm远程访问docker容器</a>等。</p></div></div></div><div id=footer><div class=container-footer><div class=info>2024 - <span id=info-date></span></div></div></div><div class=cool-after style=background-color:rgba(255,255,255,.78);backdrop-filter:saturate(180%)blur(.1px)></div></body></html>